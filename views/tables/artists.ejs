<% layout('/partials/table') %>

  <section class="hero is-dark mb-5">
    <div class="hero-body">
      <p class="title" style="color: whitesmoke;">
        Artists
      </p>
      <p class="subtitle mt-1" style="color: whitesmoke;">
        View, insert, or search for an Artist. An Artist may or may not be signed
        to a Record Label. An Artist must have at least one song attributed to
        them.
      </p>
    </div>
  </section>

  <div class="container" id="form-wrapper">
    <!-- Insert Artist Form  -->
    <div class="container mb-5 mr-3" id="form-container">
      <div class="box">
        <form id="addForm" method="POST" action="/artist">
          <h5 class="title is-5">INSERT new artist</h5>

          <div class="field">
            <label class="label">* Artist Name</label>
            <div class="control">
              <input name="artistName" id="artistNameInput" class="input" type="text" placeholder="" />
            </div>
          </div>

          <div class="field">
            <label for="label-select" class="label">Label</label>
            <select name="labelSelect">
              <% data.labels.forEach(label=> { %>
                <option value="<%= label.labelID %>">
                  <%= label.labelName %> | <%= label.labelID %>
                </option>
                <% }) %>
            </select>
          </div>

          <div class="field is-grouped">
            <div class="control">
              <button id="insertButton" type="submit" class="button is-small is-link">
                <strong>Submit</strong>
              </button>
            </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Search Artist Form -->
  <div class="container mb-5 ml-2" id="form-container">
    <form id="searchForm" method="GET" action="/search">
      <div class="box">
        <h5 class="title is-5">SEARCH existing artist</h5>

        <div class="field">
          <label class="label">Search for...</label>
          <div class="control">
            <input name="searchQuery" id="searchQueryInput" class="input" type="text" placeholder="" />
          </div>
        </div>

        <div class="field is-grouped">
          <div class="control">
            <button id="searchBtn" class="button is-small is-link">
              <strong>Search</strong>
            </button>
          </div>
        </div>
      </div>
    </form>
  </div>
  </div>

  <!-- Artist Table Data -->
  <div class="container">
    <div class="box">
      <table class="table is-fullwidth">
        <thead>
          <tr>
            <th>Artist ID</th>
            <th>Artist name</th>
            <th>Label ID</th>
            <th>Modify row</th>
          </tr>
        </thead>
        <tbody>
          <% data.forEach(row=> { %>
            <tr id="<%=row.artistID%>">
              <td>
                <%=row.artistID%>
              </td>
              <td>
                <%=row.artistName%>
              </td>
              <td>
                <%=row.labelID%>
              </td>
              <td>
                <button class="button is-small is-primary editButton" style="margin-right: 2px;">
                  <strong>Edit</strong>
                  <span class="icon is-small">
                    <i class="fas fa-edit"></i>
                  </span>
                </button>
                <button class="button is-small is-danger deleteButton" style="margin-left: 2px;">
                  <strong>Delete</strong>
                  <span class="icon is-small">
                    <i class="fas fa-trash-alt"></i>
                  </span>
                </button>
              </td>
            </tr>
            <% }) %>
        </tbody>
      </table>
    </div>
  </div>